{{ define "admin_scene_list.go.tmpl" }}
{{ template "admin_header" . }}

<h2 class="section-title">ã‚·ãƒ¼ãƒ³ã‚«ãƒ¼ãƒ‰ç®¡ç†</h2>

<div class="card mb-4">
    <div style="padding: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="/admin/scene/new" class="btn btn-primary">â• æ–°è¦ã‚·ãƒ¼ãƒ³ã‚«ãƒ¼ãƒ‰è¿½åŠ </a>
        <a href="/admin/import/scene" class="btn btn-secondary">ğŸ“ CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ</a>
    </div>
</div>

<!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
<div class="card mb-4">
    <div style="padding: 1.5rem;">
        <h3 style="margin-bottom: 1.5rem; color: #4a5568; display: flex; align-items: center; gap: 0.5rem;">
            ğŸ” æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        </h3>
        <form method="GET" action="/admin/scene">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                <div class="admin-form-group">
                    <label for="member_id" class="form-label">ãƒ¡ãƒ³ãƒãƒ¼</label>
                    <select class="form-control" id="member_id" name="member_id">
                        <option value="0">ã™ã¹ã¦</option>
                        {{ range .members }}
                        <option value="{{ .ID }}" {{ if eq .ID $.searchParams.MemberID }}selected{{ end }}>{{ .Name }}</option>
                        {{ end }}
                    </select>
                </div>
                <div class="admin-form-group">
                    <label for="photograph_id" class="form-label">æ’®å½±</label>
                    <select class="form-control" id="photograph_id" name="photograph_id">
                        <option value="0">ã™ã¹ã¦</option>
                        {{ range .photographs }}
                        <option value="{{ .ID }}" {{ if eq .ID $.searchParams.PhotographID }}selected{{ end }}>{{ .Name }}</option>
                        {{ end }}
                    </select>
                </div>
                <div class="admin-form-group">
                    <label for="color_type_id" class="form-label">ã‚«ãƒ©ãƒ¼</label>
                    <select class="form-control" id="color_type_id" name="color_type_id">
                        <option value="0">ã™ã¹ã¦</option>
                        {{ range .colors }}
                        <option value="{{ .ID }}" {{ if eq .ID $.searchParams.ColorTypeID }}selected{{ end }}>{{ .Name }}</option>
                        {{ end }}
                    </select>
                </div>
                <div class="admin-form-group">
                    <label for="ssr_plus" class="form-label">ãƒ¬ã‚¢ãƒªãƒ†ã‚£</label>
                    <select class="form-control" id="ssr_plus" name="ssr_plus">
                        <option value="-1">ã™ã¹ã¦</option>
                        <option value="1" {{ if eq 1 .searchParams.SSRPlus }}selected{{ end }}>SSR+</option>
                        <option value="0" {{ if eq 0 .searchParams.SSRPlus }}selected{{ end }}>é€šå¸¸</option>
                    </select>
                </div>
            </div>
            <div style="display: flex; gap: 1rem;">
                <button type="submit" class="btn btn-primary">ğŸ” æ¤œç´¢</button>
                <a href="/admin/scene" class="btn btn-secondary">ğŸ—‘ï¸ ã‚¯ãƒªã‚¢</a>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div style="padding: 1.5rem; overflow-x: auto;">
        <h3 class="section-title" style="margin-bottom: 1.5rem;">ğŸŒ¬ï¸ ã‚·ãƒ¼ãƒ³ã‚«ãƒ¼ãƒ‰ä¸€è¦§</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>æ’®å½±</th>
                    <th>ãƒ¡ãƒ³ãƒãƒ¼</th>
                    <th>ã‚«ãƒ©ãƒ¼</th>
                    <th>Vocal</th>
                    <th>Dance</th>
                    <th>Performance</th>
                    <th>æœŸå¾…å€¤</th>
                    <th>SSR+</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {{ range .scenes }}
                <tr>
                    <td>{{ .ID }}</td>
                    <td style="font-weight: 600; color: #2d3748;">{{ .PhotographName }}</td>
                    <td>{{ .MemberName }}</td>
                    <td>
                        <span style="padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 500;
                              {{if eq .ColorName "Red"}}background: rgba(255, 99, 99, 0.2); color: #e53e3e;
                              {{else if eq .ColorName "Blue"}}background: rgba(99, 179, 255, 0.2); color: #3182ce;
                              {{else if eq .ColorName "Yellow"}}background: rgba(255, 235, 99, 0.2); color: #d69e2e;
                              {{else}}background: rgba(113, 128, 150, 0.2); color: #718096;{{end}}">
                            {{ .ColorName }}
                        </span>
                    </td>
                    <td style="font-family: monospace; color: #667eea; font-weight: 500;">{{ .VocalMax }}</td>
                    <td style="font-family: monospace; color: #e53e3e; font-weight: 500;">{{ .DanceMax }}</td>
                    <td style="font-family: monospace; color: #38a169; font-weight: 500;">{{ .PerformanceMax }}</td>
                    <td style="font-weight: 600; color: #2d3748;">{{ .ExpectedValue }}</td>
                    <td>
                        {{ if eq .SsrPlus 1 }}
                        <span style="color: #e53e3e; font-weight: bold; background: rgba(229, 62, 62, 0.1); padding: 0.25rem 0.5rem; border-radius: 8px;">âœ¨ Yes</span>
                        {{ else }}
                        <span style="color: #718096;">âŒ No</span>
                        {{ end }}
                    </td>
                    <td>
                        <a href="/admin/scene/{{ .ID }}/edit" class="btn btn-primary">âœï¸ ç·¨é›†</a>
                        <form method="post" action="/admin/scene/{{ .ID }}/delete" style="display: inline;"
                              onsubmit="return confirm('ã“ã®ã‚·ãƒ¼ãƒ³ã‚«ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')">
                            <button type="submit" class="btn btn-danger">ğŸ—‘ï¸ å‰Šé™¤</button>
                        </form>
                    </td>
                </tr>
                {{ end }}
            </tbody>
        </table>
    </div>
</div>

<!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
<div class="pagination">
    {{ if .hasPrev }}
        <a href="?page={{ .prevPage }}">&laquo; å‰ã¸</a>
    {{ end }}

    <span>ãƒšãƒ¼ã‚¸ {{ .currentPage }} / {{ .totalPages }}</span>

    {{ if .hasNext }}
        <a href="?page={{ .nextPage }}">æ¬¡ã¸ &raquo;</a>
    {{ end }}
</div>

{{ template "admin_footer" . }}
{{ end }}