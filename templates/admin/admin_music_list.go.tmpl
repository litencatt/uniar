{{ define "admin/music_list.go.tmpl" }}
{{ template "admin_header" . }}

<h2 class="section-title">æ¥½æ›²ç®¡ç†</h2>

<div class="card" style="margin-bottom: 2rem;">
    <div style="padding: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="/admin/music/new" class="admin-btn">â• æ–°è¦æ¥½æ›²è¿½åŠ </a>
        <a href="/admin/import/music" class="admin-btn admin-btn-secondary">ğŸ“ CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ</a>
    </div>
</div>

<!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
<div class="card" style="margin-bottom: 2rem;">
    <div style="padding: 1.5rem;">
        <h3 style="margin-bottom: 1.5rem; color: #4a5568; display: flex; align-items: center; gap: 0.5rem;">
            ğŸ” æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        </h3>
        <form method="GET" action="/admin/music">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                <div class="admin-form-group">
                    <label for="name" class="admin-form-label">æ¥½æ›²å</label>
                    <input type="text" class="admin-form-control" id="name" name="name" value="{{ .searchParams.Name }}" placeholder="æ¥½æ›²åã§æ¤œç´¢">
                </div>
                <div class="admin-form-group">
                    <label for="live_id" class="admin-form-label">ãƒ©ã‚¤ãƒ–</label>
                    <select class="admin-form-control" id="live_id" name="live_id">
                        <option value="0">ã™ã¹ã¦</option>
                        {{ range .lives }}
                        <option value="{{ .ID }}" {{ if eq .ID $.searchParams.LiveID }}selected{{ end }}>{{ .Name }}</option>
                        {{ end }}
                    </select>
                </div>
                <div class="admin-form-group">
                    <label for="color_type_id" class="admin-form-label">ã‚«ãƒ©ãƒ¼</label>
                    <select class="admin-form-control" id="color_type_id" name="color_type_id">
                        <option value="0">ã™ã¹ã¦</option>
                        {{ range .colors }}
                        <option value="{{ .ID }}" {{ if eq .ID $.searchParams.ColorTypeID }}selected{{ end }}>{{ .Name }}</option>
                        {{ end }}
                    </select>
                </div>
            </div>
            <div style="display: flex; gap: 1rem;">
                <button type="submit" class="admin-btn">ğŸ” æ¤œç´¢</button>
                <a href="/admin/music" class="admin-btn admin-btn-secondary">ğŸ—‘ï¸ ã‚¯ãƒªã‚¢</a>
            </div>
        </form>
    </div>
</div>

<div class="admin-table-container">
    <h3 class="section-title">æ¥½æ›²ä¸€è¦§</h3>
    <table class="admin-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>æ¥½æ›²å</th>
                <th>ãƒ©ã‚¤ãƒ–</th>
                <th>ã‚«ãƒ©ãƒ¼</th>
                <th>Normal</th>
                <th>Pro</th>
                <th>Master</th>
                <th>é•·ã•</th>
                <th>æ¥½æ›²ãƒœãƒ¼ãƒŠã‚¹</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            {{ range .musics }}
            <tr>
                <td>{{ .ID }}</td>
                <td style="font-weight: 600; color: #2d3748;">{{ .Name }}</td>
                <td>{{ .LiveName }}</td>
                <td>
                    <span style="padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 500;
                          {{if eq .ColorName "Red"}}background: rgba(255, 99, 99, 0.2); color: #e53e3e;
                          {{else if eq .ColorName "Blue"}}background: rgba(99, 179, 255, 0.2); color: #3182ce;
                          {{else if eq .ColorName "Yellow"}}background: rgba(255, 235, 99, 0.2); color: #d69e2e;
                          {{else}}background: rgba(113, 128, 150, 0.2); color: #718096;{{end}}">
                        {{ .ColorName }}
                    </span>
                </td>
                <td>{{ .Normal }}</td>
                <td>{{ .Pro }}</td>
                <td>{{ .Master }}</td>
                <td>{{ .Length }}ç§’</td>
                <td>{{ .MusicBonus }}%</td>
                <td>
                    <a href="/admin/music/{{ .ID }}/edit" class="admin-btn">âœï¸ ç·¨é›†</a>
                    <form method="post" action="/admin/music/{{ .ID }}/delete" style="display: inline;"
                          onsubmit="return confirm('ã“ã®æ¥½æ›²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')">
                        <button type="submit" class="admin-btn admin-btn-danger">ğŸ—‘ï¸ å‰Šé™¤</button>
                    </form>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>

{{ template "admin_footer" . }}
{{ end }}